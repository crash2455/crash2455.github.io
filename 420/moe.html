<html>

<head>
    <link rel="stylesheet" type="text/css" href="moe.css">
    <script src="./howler.js-master/dist/howler.js"></script>
</head>


<body id='seizure'>
    <button id="music">Click me</button>
    <img id="moe" src="./assets/img/0.png">
</body>

<script>
    var t;
    var m;

    var moeExt = 1;

    var restOfLifeRhythm = ['x','.','.','o','.','.','x','.','.','.','.','.','.','o','.','x','.','.','o','.','x','.','.','.','.','x','o','.','.','.','o','.','.','x','.','.','.','.','.','o','.','.','x','.','.','o','x','.','.','.','.','.','x','o','.','.','o','.','.','x','.','.','.','.','.','.','o','.','x','.','.','.','.','x','.','.','.','.','x','o','.','.','.','o','.','.','x','.','.','.','.','.','.','o','.','x','.','.','o','x','.','.','.','.','.','x','o','.','.','o','.','.','.','x','.','.','.','.','.','o','.','.','x','.','.','o','x','.','.','.','.','.','x','o','.','.','o','.','.','x','.','.','.','.','.','.','o','.','x','.','.','o','.','x','.','.','.','.','x','o','.','.','.','o','.','.','x','.','.','.','.','.','.','o','.','x','.','.','o','x','.','.','.','.','.','x','o','.','.','o','.','.','.','x','.','.','.','.','x','o','.','x','.','.','.','o','x','.','x','x','.','x','.']

    function moe(){
        var hue = (Math.floor(Math.random() * 16777215)).toString(16);
        document.getElementById('seizure').style.backgroundColor = '#' + hue;

        //console.log(moe);

        var moe = ((moeExt + (Math.ceil(Math.random() * 23))) % 24);
        moeExt= moe;
        moeStr = moe.toString();

        document.getElementById('moe').src='./assets/img/'+moeStr+'.png';
        console.log(moe);
    }

    var sound = new Howl({
        src: ['./assets/weedloop2.ogg'],
        loop: true,
        volume: 0.5,
    });

    var musicIndex = 0;

    function musicBox(){
      if(restOfLifeRhythm[musicIndex] == 'x')
      {
        moe();
      }
      else if(restOfLifeRhythm[musicIndex] == 'o')
      {
        moe();
      }
      else if(restOfLifeRhythm[musicIndex] == '-')
      {
        moe();
      }
      musicIndex++;
      if (musicIndex == restOfLifeRhythm.length)
      {
        musicIndex = 0;
        sound.seek(0);
      }
    }

    document.getElementById("music").onclick = function () {
        document.getElementById("music").style = "display: none";
        document.getElementById("moe").style = "display: inline";
        m = setInterval(musicBox, 121.95121951)
        sound.play();
    }
</script>

</html>
